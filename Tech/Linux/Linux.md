### Vim

ls :(list)列出工作目录下的文件/文件夹名称

vim编辑器（vim /.../...)

vim模式切换

1.命令模式下按：进入末行模式

2.末行模式下按两次esc快退

3.命令模式下按i/a进入编辑模式

4.编辑模式下按esc回到命令模式

vim指令

1.末行模式：

a. :wq保存并退出

b. :wq!保存并强制退出

2.编辑模式

a."i":在当前光标所在位置插入，光标后文本向后移动

b."l":相当于在行首执行"i"

c."a":在当前光标所在位置后插入

d."o":在光标所在行的下插入新的一行。光标停在空行首，等待输入文本

e."O":在光标所在行的上插入新的一行。光标停在空行的行首，等待输入文本

### 创建文件

直接在目录下创建文件：touch (file_name)

在terminal中直接对文件修改后保存：vi/vim (file_name)

直接覆盖源文件：>/>>

或者：ls >/>> ;  ps -ef | grep java >/>> ; echo $PATH >/>> ; cat >/>>

### 创建目录/文件转移

创建目录：mkdir -p /.../.../.../...

切换目录：cd

显示当前目录：pwd

删除：rm ; rmdir ; rm -rf

复制： cp [源文件] [目标目录]

移动文件：rm

以管理员权限编辑文档 : sudo gedit (file_name)

### 权限管理

三种权限：读/写/执行 对应字母R W X；

权限的粒度分组：拥有者 、群组 、其它组。每个文件都可以针对三个粒度，设置不同的rwx(读写执行)权限。通常情况下，一个文件只能归属于一个用户和组， 如果其它的用户想有这个文件的权限，则可以将该用户加入具备权限的群组，一个用户可以同时归属于多个组。

修改权限命令:chmod

设置所有用户可读取文件：

```
chmod ugo+r （file_name)
```

设置只有拥有者可以读写及执行:

```
chmod u+rwx (file_name)
```

我们规定 数字 4 、2 和 1表示读、写、执行权限(具体原因可见下节权限详解内容)，即 r=4，w=2，x=1 。此时其他的权限组合也可以用其他的八进制数字表示出来，如：rwx = 4 + 2 + 1 = 7 rw = 4 + 2 = 6 rx = 4 +1 = 5 。用三个8进制数字分别表示 拥有者 、群组 、其它组( u、 g 、o)的权限详情，并用chmod直接加三个8进制数字的方式直接改变文件权限。例如：

```
chmod 777 （file_name)
```

https://blog.csdn.net/weixin_39629780/article/details/111205579

### Linux系统结构

#### 开机过程

BIOS开机硬件自检之后连接/boot分区。/boot分区一般包含Vmlinuz（即linux系统内核）；initrd-img，启动虚拟硬盘将硬件和操作系统连接；System-map,包含所有内存地址所对应的符号，系统中即将启动的服务和应用将通过system-map中的符号调用内存。

//在kali-linux中选择开机选项后会出现"inital ramdisk"，即为正在启动initrd-img.

//安卓手机超级管理员接口程序Magisk的实现方法：通过启动时在 boot 中创建钩子，把 /data/magisk.img 挂载到 /magisk，构建出一个在 system 基础上能够自定义替换，增加以及删除的文件系统，所有操作都在启动的时候完成，实际上并没有对 /system 分区进行修改（即 systemless 接口，以不触动 /system 的方式修改 /system）。

运行进程:init.d；初始化之后其它应用和服务才能启动//与Windows程序不同，linux系统中开机自启的服务被称为Daemon。大多数系统默认的Daemon会在启动完成后自动销毁，且全程只在后台运行且不连接Shell。但因为Daemon在系统服务中的优先级非常高，可以通过其他方式产生daemon进程并监视系统运行或修改系统选项。大部分安卓手机中的"无障碍选项"的原理即为创建一个Daemon进程。

操作系统初始化：运行命令检查磁盘，交换分区（swap file）等。

```c
l5:5:wait:/etc/rc.d/rc 5
```

建立终端，同时创建图形化界面，启动过程结束。

#### 根目录文件结构

![](https://cdn.jsdelivr.net/gh/IssacL04/IHS@img/img/202404151151059.png)

/bin：存放命令的文件夹；

/boot：上文提及，存储启动linux系统需要的核心文件；

/etc：存储各个软件的配置文件，例如Apache2.conf就存在与该目录下；

/home:称为家目录，用以存放用户的第三方文件；

/lib:存放动态链接文件，程序运行必须借助于链接文件，类似于Windows中的.dll；

/var：存放变量和不断改变的文件，例如程序日志；

/root：系统管理员文件夹；/sbin：存放root用户的系统管理程序

/usr:共享资源目录，其中也包含/bin;/sbin，作用与上文提及的相同,/src保存内核源码；

*/proc：该目录实际上并不存在与实体存储内，而是系统内存的虚拟目录，其中动态存储当前内存和系统内核的运行状态，可以通过修改器中的文件直接访问系统信息或改变内存行为等；

/selinux：保存与selinux机制有关的文件；

*selinux：是一个以模块形式挂载于linux上的安全子系统；传统linux系统只要获取了root权限就可以对整个系统做任意修改，而selinux在系统进程上对root用户进行了进一步限制：即root用户调用的某个进程是否可以修改文件或修改权限，而进程的优先级高于用户，就决定了root用户也不能任意地对系统的所有内容进行修改。例如Ubuntu 18.04LTS在开启selinux enforcing模式之后不可以修改/boot分区下的任何文件；安卓厂商的第三方系统，除MIUI外的大部分系统会强制selinux enforcing模式，即使获取了root权限也不可以修改kernel分区，boot分区的内容，但可以通过root权限修改selinux的运行模式，例如从enforcing改为permissive；但是一般情况下，因为手机root后厂商官方的安全组件大部分不再生效，将selinux改为enforcing以外的其它模式是比较危险的。

Selinux系统的具体操作：https://zhuanlan.zhihu.com/p/165974960



